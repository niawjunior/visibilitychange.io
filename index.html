<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link href="https://vjs.zencdn.net/7.6.5/video-js.css" rel="stylesheet">
  <script src="https://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js"></script>
  <script src='https://vjs.zencdn.net/7.6.5/video.js'></script>

</head>
<style>
  .video-js .vjs-tech {
    outline: none;
  }
  #count {
    display: flex;
    justify-content: center;
    flex-direction: column;
    text-align: center;
    
  }
  .container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 300px;
  }
  body {
    background-color: #000000;
  }
  h1 {
    color: #ffffff;
  }

  .wrap {
    text-align: center;
  }
  .click {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 0px;
    background-color: red;
    outline: none;
    cursor: not-allowed;
  }
  .success:hover {
    transform: scale(1.3);
  }
</style>
<body>
  <div class="wrap">
    <h1 id="head">กรุณา ฟังๆ ฟังให้จบ จบ จบ ~</h1>
      <video id='my-video' class='video-js' style="margin:auto" controls preload='auto' width='640' height='264'
    poster='คสช.jpg' data-setup='{}'>
      <source src='คสช.mp4' type='video/mp4'>
    </video>
  </div>
  <div class="container">
    <button class="click">
      <h1 id="count"></h1>
    </button>
  </div>
</body>
<script>
const isFocused = () => !document.hidden
let i = 30
var player = videojs('my-video', {
  "controls": false
});

player.ready(function() {
  setInterval(() => {

    if (isFocused()) {
      if (i >= 0) {
        var promise = player.play();
        if (promise !== undefined) {
          promise.then(function() {
          }).catch(function(error) {
          });
        }
        document.querySelector('#count').innerHTML = i
        i --
      } else {
        var promise = player.pause();
        if (promise !== undefined) {
          promise.then(function() {
          }).catch(function(error) {
          });
        }
        document.querySelector('#count').innerHTML = 'ข้าม'
        document.querySelector('.click').style.backgroundColor = 'green'
        document.querySelector('.click').style.cursor = 'pointer'
        document.querySelector('.click').classList.add('success')
      }
    } else {
      var promise = player.pause();
        if (promise !== undefined) {
          promise.then(function() {
          }).catch(function(error) {
          });
        }
        if (i <= 0) {          
          document.querySelector('#count').innerHTML = 'ข้าม'
          document.querySelector('.click').style.backgroundColor = 'green'
          document.querySelector('.click').style.cursor = 'pointer'
          document.querySelector('.click').classList.add('success')
        }
    }

 }, 1000)
      });

  
      
</script>
  <script>
      
  </script>
</html>